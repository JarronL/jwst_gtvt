#!/usr/bin/env python
import argparse
import sys

from jwst_gtvt.find_tgt_info import main

if __name__ == '__main__':
    try:
        # see if there is a negative dec in sexagesimal coordinates
        dec_index = [':' in arg and arg.startswith('-') for arg in sys.argv].index(True)
        arg_list = sys.argv[1:]
        dec = arg_list.pop(dec_index-1)
        arg_list.append('--')
        arg_list.append(dec)

    except ValueError:
        arg_list = sys.argv[1:]

    parser = argparse.ArgumentParser(description='')
    parser.add_argument('ra', help='Right Ascension of target in either sexagesimal (hh:mm:ss.s) or degrees')
    parser.add_argument('dec', help='Declination of target in either sexagesimal (dd:mm:ss.s) or degrees')
    parser.add_argument('--pa', help='Specify a desired Position Angle')
    parser.add_argument('--save_plot', help='Path of file to save plot output')
    parser.add_argument('--save_table', help='Path of file to save table output')
    parser.add_argument('--instrument', help='If specified plot shows only windows for this instrument')
    parser.add_argument('--name', help='Target Name to appear on plots')
    parser.add_argument('--start_date', help='Start date for visibility search in yyyy-mm-dd format')
    parser.add_argument('--end_date', help='End date for visibility search in yyyy-mm-dd format')
    args = parser.parse_args(arg_list)

    main(args)